
# =====================================================================
# File: koyeb.yaml                       (ROOT, OPTIONAL)
# =====================================================================
services:
  - name: chickenandrice-api
    instance_type: free
    ports:
      - port: 8080
        http_options:
          healthcheck:
            path: /healthz
            interval: 10
            timeout: 3
            grace_period: 20
    env:
      - key: NODE_ENV
        value: production
      - key: TZ
        value: Africa/Lagos
      - key: MONGO_URI
        value: ${MONGO_URI}
      - key: JWT_SECRET
        value: ${JWT_SECRET}
      - key: GOOGLE_MAPS_API_KEY
        value: ${GOOGLE_MAPS_API_KEY}
      - key: PUBLIC_BASE_URL
        value: ${PUBLIC_BASE_URL}
      - key: EMAIL_USER
        value: ${EMAIL_USER}
      - key: EMAIL_PASS
        value: ${EMAIL_PASS}
      - key: EMAIL_TO_DEFAULT
        value: ${EMAIL_TO_DEFAULT}
      - key: EMAIL_HOST
        value: ${EMAIL_HOST}
      - key: EMAIL_PORT
        value: ${EMAIL_PORT}
    routes:
      - path: /
        preserve_path: true